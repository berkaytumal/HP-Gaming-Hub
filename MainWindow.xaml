<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="HP_Gaming_Hub.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:HP_Gaming_Hub"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="HP Gaming Hub">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Custom Title Bar -->
        <Grid x:Name="AppTitleBar" Grid.Row="0" Height="32">
            <Image Source="Assets/Square44x44Logo.targetsize-24_altform-unplated.png" 
                   HorizontalAlignment="Left" 
                   Width="16" Height="16" 
                   Margin="8,0"/> 
            <TextBlock x:Name="AppTitleTextBlock" Text="HP Gaming Hub" 
                       TextWrapping="NoWrap" 
                       Style="{StaticResource CaptionTextBlockStyle}" 
                       VerticalAlignment="Center" 
                       Margin="28,0,0,0"/> 
        </Grid>
        
        <!-- Main Content Area -->
        <Grid Grid.Row="1">
            <NavigationView x:Name="MainNavigationView" 
                           IsBackButtonVisible="Collapsed"
                           IsSettingsVisible="False"
                           OpenPaneLength="250"
                           CompactModeThresholdWidth="768"
                           ExpandedModeThresholdWidth="1008"
                           SelectedItem="{x:Bind MonitorNavItem}"
                           SelectionChanged="MainNavigationView_SelectionChanged">
                
                <NavigationView.MenuItems>
                     <NavigationViewItem x:Name="FanNavItem" Content="Fan">
                         <NavigationViewItem.Icon>
                             <ImageIcon Source="Assets/fan-icon.png"/>
                         </NavigationViewItem.Icon>
                     </NavigationViewItem>
                     
                     <NavigationViewItem x:Name="GraphicsNavItem" Content="Graphics">
                         <NavigationViewItem.Icon>
                             <ImageIcon Source="Assets/graphics-icon.png"/>
                         </NavigationViewItem.Icon>
                     </NavigationViewItem>
                     
                     <NavigationViewItem x:Name="KeyboardNavItem" Content="Keyboard">
                         <NavigationViewItem.Icon>
                             <ImageIcon Source="Assets/keyboard-icon.png"/>
                         </NavigationViewItem.Icon>
                     </NavigationViewItem>
                     
                     <NavigationViewItem x:Name="MonitorNavItem" Content="Monitor">
                         <NavigationViewItem.Icon>
                             <ImageIcon Source="Assets/monitor-icon.png"/>
                         </NavigationViewItem.Icon>
                     </NavigationViewItem>
                 </NavigationView.MenuItems>
                 
                 <NavigationView.FooterMenuItems>
                     <NavigationViewItem x:Name="SettingsNavItem" Content="Settings">
                         <NavigationViewItem.Icon>
                             <ImageIcon Source="Assets/settings-icon.png"/>
                         </NavigationViewItem.Icon>
                     </NavigationViewItem>
                 </NavigationView.FooterMenuItems>
                
                <!-- Main Content Area with Page Animation -->
                  <Grid Margin="24">
                     
                     <!-- Fan Page -->
                      <ScrollViewer x:Name="FanPage" Visibility="Collapsed">
                         <StackPanel Spacing="24" Padding="32">
                             <TextBlock Text="Fan Control" Style="{StaticResource TitleTextBlockStyle}"/>
                             <TextBlock Text="Control your system's fan speeds using OmenMon fan programs or manual adjustment." TextWrapping="Wrap"/>
                             
                             <StackPanel Spacing="16" IsEnabled="{x:Bind ViewModel.IsFanControlEnabled, Mode=OneWay}">
                                 <TextBlock Text="Fan Programs" Style="{StaticResource SubtitleTextBlockStyle}"/>
                                 <ComboBox Header="Select Fan Program" 
                                           ItemsSource="{x:Bind ViewModel.FanPrograms, Mode=OneWay}"
                                           SelectedItem="{x:Bind ViewModel.SelectedFanProgram, Mode=TwoWay}"
                                           PlaceholderText="Choose a fan program..."/>
                                 
                                 <TextBlock Text="Current Fan Status" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,24,0,0"/>
                                 <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="16">
                                     <StackPanel Spacing="8">
                                         <TextBlock>
                                             <Run Text="Fan Count: "/>
                                             <Run Text="{x:Bind ViewModel.FanInfo.FanCount, Mode=OneWay}"/>
                                         </TextBlock>
                                         <TextBlock>
                                             <Run Text="Current Mode: "/>
                                             <Run Text="{x:Bind ViewModel.FanInfo.FanMode, Mode=OneWay}"/>
                                         </TextBlock>
                                     </StackPanel>
                                 </Border>
                                 
                                 <TextBlock Text="Manual Fan Speed Control" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,24,0,0"/>
                                 <Slider Minimum="0" Maximum="255" 
                                         Value="{x:Bind ViewModel.FanInfo.Fan1Speed, Mode=OneWay}"
                                         Header="CPU Fan Speed"
                                         ValueChanged="Fan1Slider_ValueChanged"/>
                                 <Slider Minimum="0" Maximum="255" 
                                         Value="{x:Bind ViewModel.FanInfo.Fan2Speed, Mode=OneWay}"
                                         Header="GPU Fan Speed"
                                         ValueChanged="Fan2Slider_ValueChanged"/>
                                 
                                 <Button Content="Apply Fan Settings" Click="ApplyFanSettings_Click" Margin="0,16,0,0"/>
                             </StackPanel>
                             
                             <TextBlock Text="Note: Manual fan control will override automatic programs. Use with caution to avoid overheating." 
                                        TextWrapping="Wrap" FontStyle="Italic" Foreground="{ThemeResource SystemFillColorCautionBrush}"/>
                         </StackPanel>
                     </ScrollViewer>
                     
                     <!-- Graphics Page -->
                      <ScrollViewer x:Name="GraphicsPage" Visibility="Collapsed">
                         <StackPanel Spacing="24" Padding="32">
                             <TextBlock Text="Graphics Settings" Style="{StaticResource TitleTextBlockStyle}"/>
                             <TextBlock Text="Configure your GPU settings and performance modes through OmenMon BIOS control." TextWrapping="Wrap"/>
                             
                             <StackPanel Spacing="16">
                                 <TextBlock Text="GPU Mode Control" Style="{StaticResource SubtitleTextBlockStyle}"/>
                                 <ComboBox Header="Graphics Mode" SelectedItem="{x:Bind ViewModel.SelectedGpuMode, Mode=TwoWay}">
                                     <ComboBoxItem Content="Hybrid"/>
                                     <ComboBoxItem Content="Discrete"/>
                                     <ComboBoxItem Content="Optimus"/>
                                 </ComboBox>
                                 
                                 <ComboBox Header="Performance Preset" SelectedItem="{x:Bind ViewModel.SelectedGpuPreset, Mode=TwoWay}" Margin="0,16,0,0">
                                     <ComboBoxItem Content="Minimum"/>
                                     <ComboBoxItem Content="Medium"/>
                                     <ComboBoxItem Content="Maximum"/>
                                 </ComboBox>
                                 
                                 <TextBlock Text="Current GPU Status" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,24,0,0"/>
                                 <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="16">
                                     <StackPanel Spacing="8">
                                         <TextBlock>
                                             <Run Text="Current Mode: "/>
                                             <Run Text="{x:Bind ViewModel.GpuInfo.Mode, Mode=OneWay}"/>
                                         </TextBlock>
                                         <TextBlock>
                                             <Run Text="Current Preset: "/>
                                             <Run Text="{x:Bind ViewModel.GpuInfo.Preset, Mode=OneWay}"/>
                                         </TextBlock>
                                         <TextBlock>
                                             <Run Text="Temperature: "/>
                                             <Run Text="{x:Bind ViewModel.GpuInfo.Temperature, Mode=OneWay}"/>
                                             <Run Text="°C"/>
                                         </TextBlock>
                                         <TextBlock>
                                             <Run Text="Usage: "/>
                                             <Run Text="{x:Bind ViewModel.GpuInfo.Usage, Mode=OneWay}"/>
                                             <Run Text="%"/>
                                         </TextBlock>
                                     </StackPanel>
                                 </Border>
                                 
                                 <Button Content="Refresh GPU Status" Click="RefreshGpuButton_Click" Margin="0,16,0,0"/>
                             </StackPanel>
                         </StackPanel>
                     </ScrollViewer>
                     
                     <!-- Keyboard Page -->
                      <ScrollViewer x:Name="KeyboardPage" Visibility="Collapsed">
                         <StackPanel Spacing="24" Padding="32">
                             <TextBlock Text="Keyboard Settings" Style="{StaticResource TitleTextBlockStyle}"/>
                             <TextBlock Text="Control your keyboard backlight and RGB effects through OmenMon hardware interface." TextWrapping="Wrap"/>
                             
                             <StackPanel Spacing="16" IsEnabled="{x:Bind ViewModel.KeyboardInfo.HasBacklight, Mode=OneWay}">
                                 <TextBlock Text="Backlight Control" Style="{StaticResource SubtitleTextBlockStyle}"/>
                                 <ToggleSwitch Header="Backlight" IsOn="{x:Bind ViewModel.IsBacklightEnabled, Mode=TwoWay}"/>
                                 
                                 <TextBlock Text="RGB Color Settings" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,24,0,0"/>
                                 <ComboBox Header="Color Preset" SelectedItem="{x:Bind ViewModel.SelectedColor, Mode=TwoWay}">
                                     <ComboBoxItem Content="Red" Tag="FF0000"/>
                                     <ComboBoxItem Content="Green" Tag="00FF00"/>
                                     <ComboBoxItem Content="Blue" Tag="0000FF"/>
                                     <ComboBoxItem Content="Purple" Tag="800080"/>
                                     <ComboBoxItem Content="Orange" Tag="FFA500"/>
                                     <ComboBoxItem Content="White" Tag="FFFFFF"/>
                                 </ComboBox>
                                 
                                 <TextBlock Text="Current Keyboard Status" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,24,0,0"/>
                                 <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="16">
                                     <StackPanel Spacing="8">
                                         <TextBlock>
                                             <Run Text="Backlight Support: "/>
                                             <Run Text="{x:Bind ViewModel.KeyboardInfo.HasBacklight, Mode=OneWay}"/>
                                         </TextBlock>
                                         <TextBlock>
                                             <Run Text="Backlight Status: "/>
                                             <Run Text="{x:Bind ViewModel.KeyboardInfo.BacklightEnabled, Mode=OneWay}"/>
                                         </TextBlock>
                                         <TextBlock>
                                             <Run Text="Current Color: "/>
                                             <Run Text="{x:Bind ViewModel.KeyboardInfo.CurrentColor, Mode=OneWay}"/>
                                         </TextBlock>
                                     </StackPanel>
                                 </Border>
                                 
                                 <Button Content="Refresh Keyboard Status" Click="RefreshKeyboardButton_Click" Margin="0,16,0,0"/>
                             </StackPanel>
                             
                             <TextBlock Text="Note: RGB effects may not be available on all keyboard models." 
                                        TextWrapping="Wrap" FontStyle="Italic" 
                                        Visibility="{x:Bind ViewModel.KeyboardInfo.HasBacklight, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=Invert, Mode=OneWay}"/>
                         </StackPanel>
                     </ScrollViewer>
                     
                     <!-- Monitor Page (Default) -->
                      <ScrollViewer x:Name="MonitorPage" Visibility="Visible">
                         <StackPanel Spacing="24" Padding="32">
                             <StackPanel Orientation="Horizontal" Spacing="16">
                                 <TextBlock Text="System Monitor" Style="{StaticResource TitleTextBlockStyle}"/>
                                 <Border Background="{ThemeResource SystemFillColorSuccessBackgroundBrush}" 
                                         CornerRadius="4" Padding="8,4"
                                         Visibility="{x:Bind ViewModel.ConnectionStatus, Converter={StaticResource StringToVisibilityConverter}, Mode=OneWay}">
                                     <TextBlock Text="{x:Bind ViewModel.ConnectionStatus, Mode=OneWay}" 
                                                FontSize="12" FontWeight="SemiBold"/>
                                 </Border>
                             </StackPanel>
                             
                             <TextBlock Text="Real-time monitoring of your system's performance via OmenMon hardware monitoring." TextWrapping="Wrap"/>
                             
                             <Grid>
                                 <Grid.ColumnDefinitions>
                                     <ColumnDefinition Width="*"/>
                                     <ColumnDefinition Width="*"/>
                                 </Grid.ColumnDefinitions>
                                 <StackPanel Grid.Column="0" Spacing="16" Margin="0,0,12,0">
                                     <TextBlock Text="CPU Monitoring" Style="{StaticResource SubtitleTextBlockStyle}"/>
                                     <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="16">
                                         <StackPanel Spacing="8">
                                             <TextBlock FontWeight="SemiBold">
                                                 <Run Text="Temperature: "/>
                                                 <Run Text="{x:Bind ViewModel.SystemInfo.CpuTemperature, Mode=OneWay}"/>
                                                 <Run Text="°C"/>
                                             </TextBlock>
                                             <TextBlock FontWeight="SemiBold">
                                                 <Run Text="Usage: "/>
                                                 <Run Text="{x:Bind ViewModel.SystemInfo.CpuUsage, Mode=OneWay}"/>
                                                 <Run Text="%"/>
                                             </TextBlock>
                                             <TextBlock>
                                                 <Run Text="Clock Speed: "/>
                                                 <Run Text="{x:Bind ViewModel.SystemInfo.CpuClockSpeed, Mode=OneWay}"/>
                                             </TextBlock>
                                         </StackPanel>
                                     </Border>
                                 </StackPanel>
                                 <StackPanel Grid.Column="1" Spacing="16" Margin="12,0,0,0">
                                     <TextBlock Text="GPU Monitoring" Style="{StaticResource SubtitleTextBlockStyle}"/>
                                     <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="16">
                                         <StackPanel Spacing="8">
                                             <TextBlock FontWeight="SemiBold">
                                                 <Run Text="Temperature: "/>
                                                 <Run Text="{x:Bind ViewModel.SystemInfo.GpuTemperature, Mode=OneWay}"/>
                                                 <Run Text="°C"/>
                                             </TextBlock>
                                             <TextBlock FontWeight="SemiBold">
                                                 <Run Text="Usage: "/>
                                                 <Run Text="{x:Bind ViewModel.SystemInfo.GpuUsage, Mode=OneWay}"/>
                                                 <Run Text="%"/>
                                             </TextBlock>
                                             <TextBlock>
                                                 <Run Text="Memory: "/>
                                                 <Run Text="{x:Bind ViewModel.GpuInfo.Memory, Mode=OneWay}"/>
                                             </TextBlock>
                                         </StackPanel>
                                     </Border>
                                 </StackPanel>
                             </Grid>
                             
                             <StackPanel Spacing="16">
                                 <TextBlock Text="System Information" Style="{StaticResource SubtitleTextBlockStyle}"/>
                                 <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="16">
                                     <StackPanel Spacing="8">
                                         <TextBlock>
                                             <Run Text="Last Updated: "/>
                                             <Run Text="{x:Bind ViewModel.SystemInfo.LastUpdated, Mode=OneWay}"/>
                                         </TextBlock>
                                         <TextBlock>
                                             <Run Text="OmenMon Status: "/>
                                             <Run Text="{x:Bind ViewModel.ConnectionStatus, Mode=OneWay}"/>
                                         </TextBlock>
                                         <Button Content="Refresh Data" Click="RefreshButton_Click" Margin="0,8,0,0"/>
                                     </StackPanel>
                                 </Border>
                             </StackPanel>
                         </StackPanel>
                     </ScrollViewer>
                     
                     <!-- Settings Page -->
                      <ScrollViewer x:Name="SettingsPage" Visibility="Collapsed">
                         <StackPanel Spacing="24" Padding="32">
                             <TextBlock Text="Settings" Style="{StaticResource TitleTextBlockStyle}"/>
                             <TextBlock Text="Configure HP Gaming Hub and OmenMon integration settings." TextWrapping="Wrap"/>
                             
                             <StackPanel Spacing="16">
                                 <TextBlock Text="Application Settings" Style="{StaticResource SubtitleTextBlockStyle}"/>
                                 <ToggleSwitch Header="Start with Windows" IsOn="False"/>
                                 <ToggleSwitch Header="Minimize to System Tray" IsOn="True"/>
                                 <ComboBox Header="Theme" SelectedIndex="0">
                                     <ComboBoxItem Content="System Default"/>
                                     <ComboBoxItem Content="Light"/>
                                     <ComboBoxItem Content="Dark"/>
                                 </ComboBox>
                                 
                                 <TextBlock Text="OmenMon Integration" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,24,0,0"/>
                                 <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="16">
                                     <StackPanel Spacing="8">
                                         <TextBlock>
                                             <Run Text="Connection Status: "/>
                                             <Run Text="{x:Bind ViewModel.ConnectionStatus, Mode=OneWay}"/>
                                         </TextBlock>
                                         <TextBlock>
                                             <Run Text="Monitoring Active: "/>
                                             <Run Text="{x:Bind ViewModel.IsMonitoring, Mode=OneWay}"/>
                                         </TextBlock>
                                     </StackPanel>
                                 </Border>
                                 
                                 <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,16,0,0">
                                     <Button Content="Test OmenMon Connection" Click="TestConnectionButton_Click"/>
                                     <Button Content="Refresh All Data" Click="RefreshAllButton_Click"/>
                                 </StackPanel>
                                 
                                 <TextBlock Text="About" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,24,0,0"/>
                                 <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="16">
                                     <StackPanel Spacing="8">
                                         <TextBlock Text="HP Gaming Hub with OmenMon Integration" FontWeight="SemiBold"/>
                                         <TextBlock Text="Provides hardware monitoring and control for HP Omen devices."/>
                                         <TextBlock Text="Powered by OmenMon.exe CLI interface."/>
                                     </StackPanel>
                                 </Border>
                             </StackPanel>
                         </StackPanel>
                     </ScrollViewer>
                 </Grid>
                
            </NavigationView>
        </Grid>
    </Grid>
</Window>
